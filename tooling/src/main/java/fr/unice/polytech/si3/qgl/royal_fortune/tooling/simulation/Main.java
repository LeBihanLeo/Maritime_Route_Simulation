package fr.unice.polytech.si3.qgl.royal_fortune.tooling.simulation;

import fr.unice.polytech.si3.qgl.royal_fortune.environment.Wind;

import java.io.IOException;
import java.util.logging.Logger;

/**
 * @author Bonnet Kilian Imami Ayoub Karrakchou Mourad Le Bihan Leo
 *
 */
public class Main {
	//
	static final Logger LOGGER = Logger.getLogger(Main.class.getName());
	public static void main(String[] args) throws IOException {
		//------------------
		Wind wind = new Wind(0.0, 10.0);
		String jsonWeek8 = "{\"goal\":{\"mode\":\"REGATTA\",\"checkpoints\":[{\"type\":\"checkpoint\",\"position\":{\"x\":5008.695652173906,\"y\":5301.3029315961085},\"shape\":{\"type\":\"circle\",\"radius\":225}},{\"type\":\"checkpoint\",\"position\":{\"x\":7773.913043478262,\"y\":10651.465798045629},\"shape\":{\"type\":\"circle\",\"radius\":300}},{\"type\":\"checkpoint\",\"position\":{\"x\":6443.478260869564,\"y\":7842.01954397396},\"shape\":{\"type\":\"circle\",\"radius\":225}}]},\"ship\":{\"name\":\"Flop\",\"deck\":{\"length\":8,\"width\":3},\"position\":{\"x\":1865.2173913043503,\"y\":1148.2084690553752,\"orientation\":0},\"entities\":[{\"type\":\"rudder\",\"x\":7,\"y\":1},{\"type\":\"sail\",\"x\":3,\"y\":1},{\"type\":\"oar\",\"x\":1,\"y\":2},{\"type\":\"oar\",\"x\":2,\"y\":2},{\"type\":\"oar\",\"x\":3,\"y\":2},{\"type\":\"oar\",\"x\":4,\"y\":2},{\"type\":\"oar\",\"x\":5,\"y\":2},{\"type\":\"oar\",\"x\":6,\"y\":2},{\"type\":\"oar\",\"x\":1,\"y\":0},{\"type\":\"oar\",\"x\":2,\"y\":0},{\"type\":\"oar\",\"x\":3,\"y\":0},{\"type\":\"oar\",\"x\":4,\"y\":0},{\"type\":\"oar\",\"x\":5,\"y\":0},{\"type\":\"oar\",\"x\":6,\"y\":0},{\"type\":\"oar\",\"x\":7,\"y\":2},{\"type\":\"oar\",\"x\":7,\"y\":0}],\"life\":1200},\"sailors\":[{\"x\":0,\"y\":0,\"id\":0,\"name\":\"Jack Pouce\"},{\"x\":0,\"y\":1,\"id\":1,\"name\":\"Jack Pouce\"},{\"x\":0,\"y\":2,\"id\":2,\"name\":\"Edward Teach\"},{\"x\":0,\"y\":3,\"id\":3,\"name\":\"Edward Teach\"},{\"x\":1,\"y\":0,\"id\":4,\"name\":\"Tom Pouce\"},{\"x\":1,\"y\":1,\"id\":5,\"name\":\"Luffy Teach\"},{\"x\":1,\"y\":2,\"id\":6,\"name\":\"Jack Pouce\"},{\"x\":1,\"y\":3,\"id\":7,\"name\":\"Luffy Pouce\"},{\"x\":2,\"y\":0,\"id\":8,\"name\":\"Luffy Pouce\"},{\"x\":2,\"y\":1,\"id\":9,\"name\":\"Edward Teach\"},{\"x\":2,\"y\":2,\"id\":10,\"name\":\"Edward Pouce\"},{\"x\":2,\"y\":3,\"id\":11,\"name\":\"Edward Pouce\"},{\"x\":3,\"y\":0,\"id\":12,\"name\":\"Jack Teach\"},{\"x\":3,\"y\":1,\"id\":13,\"name\":\"Edward Teach\"},{\"x\":3,\"y\":2,\"id\":14,\"name\":\"Tom Pouce\"},{\"x\":3,\"y\":3,\"id\":15,\"name\":\"Edward Teach\"},{\"x\":3,\"y\":3,\"id\":16,\"name\":\"Edward Teach2\"}],\"wind\":{\"direction\":0,\"strength\":50},\"shipcount\":1}";
		String seaEntitiesWeek8 = "[{\"position\":{\"x\":6834.782608695646,\"y\":11213.355048859958,\"orientation\":0.9773843811168246},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":1500}},{\"position\":{\"x\":6821.739130434782,\"y\":9564.332247557011,\"orientation\":0.7504915783575616},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":1425}},{\"position\":{\"x\":4878.2608695652125,\"y\":10419.381107491878,\"orientation\":0.8028514559173915},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":1800}},{\"position\":{\"x\":7278.260869565218,\"y\":9942.996742671023,\"orientation\":-0.5061454830783556},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":4500}},{\"position\":{\"x\":5269.5652173912995,\"y\":8648.208469055382,\"orientation\":-0.6806784082777885},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":1500}},{\"position\":{\"x\":9065.217391304344,\"y\":10871.33550488601,\"orientation\":-0.5759586531581288},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":4500}},{\"position\":{\"x\":8908.695652173908,\"y\":9393.322475570047,\"orientation\":0.9773843811168246},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":1050}},{\"position\":{\"x\":7499.999999999996,\"y\":7756.514657980464,\"orientation\":0.8726646259971648},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":1350}},{\"position\":{\"x\":7304.347826086951,\"y\":6510.586319218246,\"orientation\":0.6632251157578452},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":450,\"height\":1125}},{\"position\":{\"x\":6208.695652173914,\"y\":6803.745928338774,\"orientation\":2.5307274153917776},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":450,\"height\":2250}},{\"position\":{\"x\":5386.956521739133,\"y\":6083.061889250812,\"orientation\":2.356194490192345},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":450,\"height\":1125}},{\"position\":{\"x\":5713.04347826087,\"y\":5276.87296416938,\"orientation\":1.5707963267948966},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":450,\"height\":1125}},{\"position\":{\"x\":5386.956521739131,\"y\":4482.899022801302,\"orientation\":0.7853981633974483},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":450,\"height\":1125}},{\"position\":{\"x\":2973.9130434782596,\"y\":2907.166123778503,\"orientation\":0},\"type\":\"reef\",\"shape\":{\"type\":\"circle\",\"radius\":675}},{\"position\":{\"x\":4304.347826086958,\"y\":1734.5276872964187,\"orientation\":-0.41887902047863906},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":450,\"height\":1200}},{\"position\":{\"x\":5334.78260869565,\"y\":2980.456026058633,\"orientation\":0},\"type\":\"reef\",\"shape\":{\"type\":\"circle\",\"radius\":450}},{\"position\":{\"x\":5700,\"y\":2943.8110749185644,\"orientation\":0},\"type\":\"reef\",\"shape\":{\"type\":\"circle\",\"radius\":675}},{\"position\":{\"x\":6091.30434782609,\"y\":2919.3811074918535,\"orientation\":0},\"type\":\"reef\",\"shape\":{\"type\":\"circle\",\"radius\":450}},{\"position\":{\"x\":4565.217391304346,\"y\":4140.879478827364,\"orientation\":0},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":450,\"height\":1125}},{\"position\":{\"x\":4617.391304347825,\"y\":6400.651465798053,\"orientation\":0},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":450,\"height\":1125}},{\"position\":{\"x\":4147.826086956523,\"y\":5276.872964169381,\"orientation\":0},\"type\":\"reef\",\"shape\":{\"type\":\"circle\",\"radius\":450}},{\"position\":{\"x\":8517.39130434782,\"y\":7768.729641693819,\"orientation\":-0.47123889803846897},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":1875}},{\"position\":{\"x\":7199.999999999998,\"y\":8758.143322475578,\"orientation\":0.6981317007977318},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":900}},{\"position\":{\"x\":10108.695652173907,\"y\":8513.84364820849,\"orientation\":1.0297442586766543},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":375,\"height\":3150}},{\"position\":{\"x\":8282.608695652169,\"y\":8428.338762214995,\"orientation\":0},\"type\":\"reef\",\"shape\":{\"type\":\"circle\",\"radius\":150}},{\"position\":{\"x\":5282.6086956521685,\"y\":9356.677524429975,\"orientation\":0.7853981633974483},\"type\":\"reef\",\"shape\":{\"type\":\"rectangle\",\"width\":450,\"height\":1500}}]";


		Game game = new Game(jsonWeek8, seaEntitiesWeek8);
		OutputMaker.insertCheckpoints(game.getGoal().getCheckPoints());
		OutputMaker.insertAllSeaEntities(game.getAllSeaEntities());
		OutputMaker.insertBeacons(game.computeAllBeacons());
		game.addFictiousCheckpoint();
		int tour=0;
		while (!game.isFinished()) {
			game.nextRound(wind);
			LOGGER.info("round = "+ tour + "  "+String.valueOf(game));
			OutputMaker.appendShipPosition(game.toString());
			tour++;
		}

		OutputMaker.insertBeacons(game.getListBeaconUsed());
		OutputMaker.writeOutputInFile();
	}
}
